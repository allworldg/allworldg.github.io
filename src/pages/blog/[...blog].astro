---
import { type CollectionEntry, getCollection, render } from 'astro:content';
import Comment from '../../components/Comment.astro';
import MetaHead from '../../components/MetaHead.astro';
import { SITE_DESCRIPTION, SITE_TITLE } from '../../constants';
import Navbar from '../../components/Navbar.astro';
import { DateFormat } from '../../utils';
import Footer from '../../components/Footer.astro';

export async function getStaticPaths() {
    const blogs = await getCollection('blog');
    return blogs.map((blog) => ({
        params: { blog: blog.id },
        props: blog
    }));
}
type Props = CollectionEntry<'blog'>;

const blog = Astro.props;
const { title, excerpt, publishDate, updatedDate } = blog.data;
const { Content } = await render(blog);
---

<!doctype html>
<html lang="en">
    <head>
        <MetaHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
    </head>
    <body>
        <Navbar />
        <main>
            <article>
                <header
                    class="flex flex-col text-center
                    bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4OSIgaGVpZ2h0PSIxMDMiPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InJnYig5NCwxNTUsNTIpIj48L3JlY3Q+PHJlY3QgeD0iLTkuNSIgeT0iLTkuNSIgd2lkdGg9IjE5IiBoZWlnaHQ9IjE5IiBzdHJva2U9IiMwMDAiIHN0cm9rZS1vcGFjaXR5PSIwLjAyIiBmaWxsPSIjZGRkIiBmaWxsLW9wYWNpdHk9IjAuMDcyMDAwMDAwMDAwMDAwMDEiIHN0cm9rZS13aWR0aD0iMSI+PC9yZWN0PjxyZWN0IHg9IjgwLjQwODk2NTM0MzgwODY2IiB5PSItOS41IiB3aWR0aD0iMTkiIGhlaWdodD0iMTkiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW9wYWNpdHk9IjAuMDIiIGZpbGw9IiNkZGQiIGZpbGwtb3BhY2l0eT0iMC4wNzIwMDAwMDAwMDAwMDAwMSIgc3Ryb2tlLXdpZHRoPSIxIj48L3JlY3Q+PHJlY3QgeD0iLTkuNSIgeT0iOTQuMzE3OTMwNjg3NjE3MzMiIHdpZHRoPSIxOSIgaGVpZ2h0PSIxOSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utb3BhY2l0eT0iMC4wMiIgZmlsbD0iI2RkZCIgZmlsbC1vcGFjaXR5PSIwLjA3MjAwMDAwMDAwMDAwMDAxIiBzdHJva2Utd2lkdGg9IjEiPjwvcmVjdD48cmVjdCB4PSI4MC40MDg5NjUzNDM4MDg2NiIgeT0iOTQuMzE3OTMwNjg3NjE3MzMiIHdpZHRoPSIxOSIgaGVpZ2h0PSIxOSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utb3BhY2l0eT0iMC4wMiIgZmlsbD0iI2RkZCIgZmlsbC1vcGFjaXR5PSIwLjA3MjAwMDAwMDAwMDAwMDAxIiBzdHJva2Utd2lkdGg9IjEiPjwvcmVjdD48cmVjdCB4PSIzNS40NTQ0ODI2NzE5MDQzMyIgeT0iMTYuNDU0NDgyNjcxOTA0MzM0IiB3aWR0aD0iMTkiIGhlaWdodD0iMTkiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW9wYWNpdHk9IjAuMDIiIGZpbGw9IiNkZGQiIGZpbGwtb3BhY2l0eT0iMC4wMiIgc3Ryb2tlLXdpZHRoPSIxIj48L3JlY3Q+PHJlY3QgeD0iLTkuNSIgeT0iNDIuNDA4OTY1MzQzODA4NjciIHdpZHRoPSIxOSIgaGVpZ2h0PSIxOSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utb3BhY2l0eT0iMC4wMiIgZmlsbD0iI2RkZCIgZmlsbC1vcGFjaXR5PSIwLjEyNDAwMDAwMDAwMDAwMDAxIiBzdHJva2Utd2lkdGg9IjEiPjwvcmVjdD48cmVjdCB4PSI4MC40MDg5NjUzNDM4MDg2NiIgeT0iNDIuNDA4OTY1MzQzODA4NjciIHdpZHRoPSIxOSIgaGVpZ2h0PSIxOSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utb3BhY2l0eT0iMC4wMiIgZmlsbD0iI2RkZCIgZmlsbC1vcGFjaXR5PSIwLjEyNDAwMDAwMDAwMDAwMDAxIiBzdHJva2Utd2lkdGg9IjEiPjwvcmVjdD48cmVjdCB4PSIzNS40NTQ0ODI2NzE5MDQzMyIgeT0iNjguMzYzNDQ4MDE1NzEzIiB3aWR0aD0iMTkiIGhlaWdodD0iMTkiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW9wYWNpdHk9IjAuMDIiIGZpbGw9IiMyMjIiIGZpbGwtb3BhY2l0eT0iMC4wNjMzMzMzMzMzMzMzMzMzNCIgc3Ryb2tlLXdpZHRoPSIxIj48L3JlY3Q+PHBvbHlsaW5lIHBvaW50cz0iMCwwLDE2LjQ1NDQ4MjY3MTkwNDMzNCw5LjUsMCwxOSwwLDAiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW9wYWNpdHk9IjAuMDIiIGZpbGw9IiNkZGQiIGZpbGwtb3BhY2l0eT0iMC4xMjQwMDAwMDAwMDAwMDAwMSIgc3Ryb2tlLXdpZHRoPSIxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5LjUsLTkuNSkgcm90YXRlKDAsOS41LDguMjI3MjQxMzM1OTUyMTY3KSI+PC9wb2x5bGluZT48cG9seWxpbmUgcG9pbnRzPSIwLDAsMTYuNDU0NDgyNjcxOTA0MzM0LDkuNSwwLDE5LDAsMCIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utb3BhY2l0eT0iMC4wMiIgZmlsbD0iI2RkZCIgZmlsbC1vcGFjaXR5PSIwLjEyNDAwMDAwMDAwMDAwMDAxIiBzdHJva2Utd2lkdGg9IjEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDkuNSwxMTMuMzE3OTMwNjg3NjE3MzMpIHJvdGF0ZSgwLDkuNSw4LjIyNzI0MTMzNTk1MjE2Nykgc2NhbGUoMSwtMSkiPjwvcG9seWxpbmU+PHBvbHlsaW5lIHBvaW50cz0iMCwwLDE2LjQ1NDQ4MjY3MTkwNDMzNCw5LjUsMCwxOSwwLDAiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW9wYWNpdHk9IjAuMDIiIGZpbGw9IiMyMjIiIGZpbGwtb3BhY2l0eT0iMC4xMzI2NjY2NjY2NjY2NjY2NSIgc3Ryb2tlLXdpZHRoPSIxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4MC40MDg5NjUzNDM4MDg2NiwtOS41KSByb3RhdGUoMCw5LjUsOC4yMjcyNDEzMzU5NTIxNjcpIHNjYWxlKC0xLDEpIj48L3BvbHlsaW5lPjxwb2x5bGluZSBwb2ludHM9IjAsMCwxNi40NTQ0ODI2NzE5MDQzMzQsOS41LDAsMTksMCwwIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1vcGFjaXR5PSIwLjAyIiBmaWxsPSIjMjIyIiBmaWxsLW9wYWNpdHk9IjAuMTMyNjY2NjY2NjY2NjY2NjUiIHN0cm9rZS13aWR0aD0iMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoODAuNDA4OTY1MzQzODA4NjYsMTEzLjMxNzkzMDY4NzYxNzMzKSByb3RhdGUoMCw5LjUsOC4yMjcyNDEzMzU5NTIxNjcpIHNjYWxlKC0xLC0xKSI+PC9wb2x5bGluZT48cG9seWxpbmUgcG9pbnRzPSIwLDAsMTYuNDU0NDgyNjcxOTA0MzM0LDkuNSwwLDE5LDAsMCIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utb3BhY2l0eT0iMC4wMiIgZmlsbD0iI2RkZCIgZmlsbC1vcGFjaXR5PSIwLjA3MjAwMDAwMDAwMDAwMDAxIiBzdHJva2Utd2lkdGg9IjEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDU0LjQ1NDQ4MjY3MTkwNDMzLDE2LjQ1NDQ4MjY3MTkwNDMzNCkiPjwvcG9seWxpbmU+PHBvbHlsaW5lIHBvaW50cz0iMCwwLDE2LjQ1NDQ4MjY3MTkwNDMzNCw5LjUsMCwxOSwwLDAiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW9wYWNpdHk9IjAuMDIiIGZpbGw9IiNkZGQiIGZpbGwtb3BhY2l0eT0iMC4xNDEzMzMzMzMzMzMzMzMzNCIgc3Ryb2tlLXdpZHRoPSIxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNS40NTQ0ODI2NzE5MDQzMywxNi40NTQ0ODI2NzE5MDQzMzQpIHNjYWxlKC0xLDEpIj48L3BvbHlsaW5lPjxwb2x5bGluZSBwb2ludHM9IjAsMCwxNi40NTQ0ODI2NzE5MDQzMzQsOS41LDAsMTksMCwwIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1vcGFjaXR5PSIwLjAyIiBmaWxsPSIjZGRkIiBmaWxsLW9wYWNpdHk9IjAuMDM3MzMzMzMzMzMzMzMzMzMiIHN0cm9rZS13aWR0aD0iMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTQuNDU0NDgyNjcxOTA0MzMsODcuMzYzNDQ4MDE1NzEzKSBzY2FsZSgxLC0xKSI+PC9wb2x5bGluZT48cG9seWxpbmUgcG9pbnRzPSIwLDAsMTYuNDU0NDgyNjcxOTA0MzM0LDkuNSwwLDE5LDAsMCIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utb3BhY2l0eT0iMC4wMiIgZmlsbD0iIzIyMiIgZmlsbC1vcGFjaXR5PSIwLjExNTMzMzMzMzMzMzMzMzM0IiBzdHJva2Utd2lkdGg9IjEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM1LjQ1NDQ4MjY3MTkwNDMzLDg3LjM2MzQ0ODAxNTcxMykgc2NhbGUoLTEsLTEpIj48L3BvbHlsaW5lPjxwb2x5bGluZSBwb2ludHM9IjAsMCwxNi40NTQ0ODI2NzE5MDQzMzQsOS41LDAsMTksMCwwIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1vcGFjaXR5PSIwLjAyIiBmaWxsPSIjMjIyIiBmaWxsLW9wYWNpdHk9IjAuMTMyNjY2NjY2NjY2NjY2NjUiIHN0cm9rZS13aWR0aD0iMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOS41LDQyLjQwODk2NTM0MzgwODY3KSI+PC9wb2x5bGluZT48cG9seWxpbmUgcG9pbnRzPSIwLDAsMTYuNDU0NDgyNjcxOTA0MzM0LDkuNSwwLDE5LDAsMCIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utb3BhY2l0eT0iMC4wMiIgZmlsbD0iI2RkZCIgZmlsbC1vcGFjaXR5PSIwLjAyIiBzdHJva2Utd2lkdGg9IjEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDgwLjQwODk2NTM0MzgwODY2LDQyLjQwODk2NTM0MzgwODY3KSBzY2FsZSgtMSwxKSI+PC9wb2x5bGluZT48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMTkiIGhlaWdodD0iMTkiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW9wYWNpdHk9IjAuMDIiIGZpbGw9IiNkZGQiIGZpbGwtb3BhY2l0eT0iMC4xMjQwMDAwMDAwMDAwMDAwMSIgc3Ryb2tlLXdpZHRoPSIxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5LjUsOS41KSByb3RhdGUoLTMwLDAsMCkiPjwvcmVjdD48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMTkiIGhlaWdodD0iMTkiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW9wYWNpdHk9IjAuMDIiIGZpbGw9IiNkZGQiIGZpbGwtb3BhY2l0eT0iMC4wNTQ2NjY2NjY2NjY2NjY2NyIgc3Ryb2tlLXdpZHRoPSIxIiB0cmFuc2Zvcm09InNjYWxlKC0xLDEpIHRyYW5zbGF0ZSgtODAuNDA4OTY1MzQzODA4NjYsOS41KSByb3RhdGUoLTMwLDAsMCkiPjwvcmVjdD48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMTkiIGhlaWdodD0iMTkiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW9wYWNpdHk9IjAuMDIiIGZpbGw9IiMyMjIiIGZpbGwtb3BhY2l0eT0iMC4xMTUzMzMzMzMzMzMzMzMzNCIgc3Ryb2tlLXdpZHRoPSIxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5LjUsMjMuNDA4OTY1MzQzODA4NjY3KSByb3RhdGUoMzAsMCwxOSkiPjwvcmVjdD48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMTkiIGhlaWdodD0iMTkiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW9wYWNpdHk9IjAuMDIiIGZpbGw9IiNkZGQiIGZpbGwtb3BhY2l0eT0iMC4xMjQwMDAwMDAwMDAwMDAwMSIgc3Ryb2tlLXdpZHRoPSIxIiB0cmFuc2Zvcm09InNjYWxlKC0xLDEpIHRyYW5zbGF0ZSgtODAuNDA4OTY1MzQzODA4NjYsMjMuNDA4OTY1MzQzODA4NjY3KSByb3RhdGUoMzAsMCwxOSkiPjwvcmVjdD48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMTkiIGhlaWdodD0iMTkiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW9wYWNpdHk9IjAuMDIiIGZpbGw9IiNkZGQiIGZpbGwtb3BhY2l0eT0iMC4xMjQwMDAwMDAwMDAwMDAwMSIgc3Ryb2tlLXdpZHRoPSIxIiB0cmFuc2Zvcm09InNjYWxlKDEsLTEpIHRyYW5zbGF0ZSg5LjUsLTgwLjQwODk2NTM0MzgwODY2KSByb3RhdGUoMzAsMCwxOSkiPjwvcmVjdD48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMTkiIGhlaWdodD0iMTkiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW9wYWNpdHk9IjAuMDIiIGZpbGw9IiNkZGQiIGZpbGwtb3BhY2l0eT0iMC4wODkzMzMzMzMzMzMzMzMzMyIgc3Ryb2tlLXdpZHRoPSIxIiB0cmFuc2Zvcm09InNjYWxlKC0xLC0xKSB0cmFuc2xhdGUoLTgwLjQwODk2NTM0MzgwODY2LC04MC40MDg5NjUzNDM4MDg2Nikgcm90YXRlKDMwLDAsMTkpIj48L3JlY3Q+PHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjE5IiBoZWlnaHQ9IjE5IiBzdHJva2U9IiMwMDAiIHN0cm9rZS1vcGFjaXR5PSIwLjAyIiBmaWxsPSIjMjIyIiBmaWxsLW9wYWNpdHk9IjAuMDQ2IiBzdHJva2Utd2lkdGg9IjEiIHRyYW5zZm9ybT0ic2NhbGUoMSwtMSkgdHJhbnNsYXRlKDkuNSwtOTQuMzE3OTMwNjg3NjE3MzMpIHJvdGF0ZSgtMzAsMCwwKSI+PC9yZWN0PjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxOSIgaGVpZ2h0PSIxOSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utb3BhY2l0eT0iMC4wMiIgZmlsbD0iIzIyMiIgZmlsbC1vcGFjaXR5PSIwLjA0NiIgc3Ryb2tlLXdpZHRoPSIxIiB0cmFuc2Zvcm09InNjYWxlKC0xLC0xKSB0cmFuc2xhdGUoLTgwLjQwODk2NTM0MzgwODY2LC05NC4zMTc5MzA2ODc2MTczMykgcm90YXRlKC0zMCwwLDApIj48L3JlY3Q+PC9zdmc+')] \
                           w-full
                           bg-no-repeat
                           bg-cover
                           bg-center
                           py-18"
                >
                    <h1 class="text-white text-3xl font-bold text-shadow-[0_0_40px_#34495e]">{title}</h1>
                    <time class="mt-5 text-white font-merriweather text-sm">{DateFormat(publishDate)}</time>
                </header>
                <div class="app-prose mx-auto py-6 max-w-2xl overflow-auto text-justify hyphens-auto">
                    <Content />
                </div>
                <Comment />
                <Footer />
            </article>
        </main>
    </body>
</html>
